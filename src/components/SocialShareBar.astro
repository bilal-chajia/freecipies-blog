---
interface Props {
    url?: string;
    title?: string;
    readingTime?: string;
}

const {
    url = Astro.url.href,
    title = "",
    readingTime = "5 Min Read",
} = Astro.props;

// Encode for sharing
const encodedUrl = encodeURIComponent(url);
const encodedTitle = encodeURIComponent(title);
---

<div class="social-share-bar">
    <div class="share-buttons">
        <a
            href={`https://www.facebook.com/sharer/sharer.php?u=${encodedUrl}`}
            target="_blank"
            rel="noopener noreferrer"
            class="share-btn facebook"
            aria-label="Share on Facebook"
        >
            <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor">
                <path
                    d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"
                ></path>
            </svg>
        </a>
        <a
            href={`https://twitter.com/intent/tweet?url=${encodedUrl}&text=${encodedTitle}`}
            target="_blank"
            rel="noopener noreferrer"
            class="share-btn twitter"
            aria-label="Share on X/Twitter"
        >
            <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor">
                <path
                    d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"
                ></path>
            </svg>
        </a>
        <button
            class="share-btn copy-link"
            data-url={url}
            aria-label="Copy link"
        >
            <svg
                width="18"
                height="18"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
            >
                <path
                    d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"
                ></path>
                <path
                    d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"
                ></path>
            </svg>
        </button>
        <button
            class="share-btn print"
            onclick="window.print()"
            aria-label="Print recipe"
        >
            <svg
                width="18"
                height="18"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
            >
                <polyline points="6 9 6 2 18 2 18 9"></polyline>
                <path
                    d="M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2"
                ></path>
                <rect x="6" y="14" width="12" height="8"></rect>
            </svg>
        </button>
        <span class="share-btn more">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor">
                <circle cx="12" cy="12" r="2"></circle>
                <circle cx="5" cy="12" r="2"></circle>
                <circle cx="19" cy="12" r="2"></circle>
            </svg>
        </span>
    </div>
    <div class="reading-time">
        <svg
            width="14"
            height="14"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
        >
            <circle cx="12" cy="12" r="10"></circle>
            <polyline points="12 6 12 12 16 14"></polyline>
        </svg>
        <span>{readingTime}</span>
    </div>
</div>

<style>
    .social-share-bar {
        display: flex;
        align-items: center;
        justify-content: space-between;
        padding: 1rem 0;
        border-bottom: 1px solid #e5e5e5;
        margin-bottom: 1.5rem;
    }

    .share-buttons {
        display: flex;
        align-items: center;
        gap: 0.5rem;
    }

    .share-btn {
        display: flex;
        align-items: center;
        justify-content: center;
        width: 36px;
        height: 36px;
        border-radius: 50%;
        border: none;
        background: transparent;
        color: #444;
        cursor: pointer;
        transition: all 0.2s ease;
        text-decoration: none;
    }

    .share-btn:hover {
        background: #f0f0f0;
        color: #111;
    }

    .share-btn.facebook:hover {
        background: #1877f2;
        color: white;
    }

    .share-btn.twitter:hover {
        background: #1a1a1a;
        color: white;
    }

    .reading-time {
        display: flex;
        align-items: center;
        gap: 0.5rem;
        color: #666;
        font-size: 0.875rem;
    }

    @media (max-width: 640px) {
        .social-share-bar {
            flex-wrap: wrap;
            gap: 1rem;
        }
    }
</style>

<script>
    // Copy link functionality
    document.querySelectorAll(".copy-link").forEach((btn) => {
        btn.addEventListener("click", async () => {
            const url = btn.getAttribute("data-url");
            if (url) {
                try {
                    await navigator.clipboard.writeText(url);
                    // Visual feedback
                    btn.style.background = "#10b981";
                    btn.style.color = "white";
                    setTimeout(() => {
                        btn.style.background = "";
                        btn.style.color = "";
                    }, 2000);
                } catch (err) {
                    console.error("Failed to copy:", err);
                }
            }
        });
    });
</script>

